<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-install/database_setup" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.1">
<title data-rh="true">Create and connect MongoDB database | OGRRE</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/img/ogrre-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/img/ogrre-social-card.jpg"><meta data-rh="true" property="og:url" content="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/install/database_setup"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create and connect MongoDB database | OGRRE"><meta data-rh="true" name="description" content="Database Setup"><meta data-rh="true" property="og:description" content="Database Setup"><link data-rh="true" rel="icon" href="/orphaned-wells-ui-doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/install/database_setup"><link data-rh="true" rel="alternate" href="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/install/database_setup" hreflang="en"><link data-rh="true" rel="alternate" href="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/install/database_setup" hreflang="x-default"><link rel="stylesheet" href="/orphaned-wells-ui-doc/assets/css/styles.594121fe.css">
<script src="/orphaned-wells-ui-doc/assets/js/runtime~main.393984f9.js" defer="defer"></script>
<script src="/orphaned-wells-ui-doc/assets/js/main.5ff4a41c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/orphaned-wells-ui-doc/"><div class="navbar__logo"><img src="/orphaned-wells-ui-doc/img/ogrre-logo.png" alt="OGRRE Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/orphaned-wells-ui-doc/img/ogrre-logo.png" alt="OGRRE Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OGRRE</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/orphaned-wells-ui-doc/docs/about">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CATALOG-Historic-Records/orphaned-wells-ui/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orphaned-wells-ui-doc/docs/about">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/orphaned-wells-ui-doc/docs/concepts">Concepts</a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/orphaned-wells-ui-doc/docs/install">Installation</a><button aria-label="Collapse sidebar category &#x27;Installation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orphaned-wells-ui-doc/docs/install/gcp_setup">Create and connect Google project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/orphaned-wells-ui-doc/docs/install/database_setup">Create and connect MongoDB database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orphaned-wells-ui-doc/docs/install/install_ogrre">Install OGRRE on your computer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orphaned-wells-ui-doc/docs/install/connect_processors">Connect trained processors to OGRRE</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/orphaned-wells-ui-doc/docs/tutorial">Tutorial</a><button aria-label="Expand sidebar category &#x27;Tutorial&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/orphaned-wells-ui-doc/docs/usage">Usage</a><button aria-label="Expand sidebar category &#x27;Usage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/orphaned-wells-ui-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/orphaned-wells-ui-doc/docs/install"><span itemprop="name">Installation</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Create and connect MongoDB database</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Create and connect MongoDB database</h1></header>
<!-- -->
<div>OGRRE requires a database to handle storage of records, projects, users, and more. It is configured to work with any MongoDB instance. MongoDB is a NoSQL database with cloud support and options for free tier databases. To learn more about MongoDB, <a target="_blank" href="https://www.mongodb.com/atlas">click here</a>. To learn how to configure OGRRE with your database, read the following tutorials.</div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-mongodb-database">Create a MongoDB database<a href="#create-a-mongodb-database" class="hash-link" aria-label="Direct link to Create a MongoDB database" title="Direct link to Create a MongoDB database">​</a></h2>
<div><ol><li><p>MongoDB can be set up locally or in the cloud. <a target="_blank" href="https://www.mongodb.com/products/platform/atlas-database">MongoDB Atlas</a> allows users to create one free tier database cluster with the cloud provider of your choice. OGRRE depends on GCP for other cloud services, so if using Atlas, it likely makes the most sense to use GCP.</p></li><li><p>To create a project and your free cluster, see the <a target="_blank" href="https://www.mongodb.com/docs/atlas/government/tutorial/create-project/">MongoDB documentation</a>. The documentation also provides instructions on how to <a target="_blank" href="https://www.mongodb.com/docs/atlas/government/tutorial/create-mongodb-user-for-cluster/">create a database user</a> and <a target="_blank" href="https://www.mongodb.com/docs/atlas/tutorial/connect-to-your-cluster/">connect to your database</a>. To connect your database to OGRRE, you will need to create a database user.</p></li><li><p>To connect to the database, you must also ensure that the IP address you want to connect from is added to the access list. In the case of OGRRE, the backend IP address must be added to this list to allow it to access and update the database records. For information on how to add an IP address, see <a target="_blank" href="https://www.mongodb.com/docs/atlas/security/ip-access-list/.">here</a>.</p></li></ol></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="initialize-database-for-ogrre">Initialize Database for OGRRE<a href="#initialize-database-for-ogrre" class="hash-link" aria-label="Direct link to Initialize Database for OGRRE" title="Direct link to Initialize Database for OGRRE">​</a></h2>
<div><i>It is necessary to add some initial collections to your database before running OGRRE</i>. OGRRE stores teams, authorized users, and assigned roles/permissions in the MongoDB database, which must be availabe as collections called <code>teams</code>, <code>users</code>, and <code>roles</code>. Furthermore, there must be at least one team and one user associated with that team, as well as a list of roles that are specific to OGRRE. You can create these manually, or use the python script we have provided to create these documents for you. The script can be downloaded <a href="/orphaned-wells-ui/downloads/InitializeMongoDB.py" download="">here</a>. The script takes the following arguments:<ul><li><b>team_name</b> (<b>-t</b>): the initial team name [<i>required</i>]</li><li><b>email</b> (<b>-e</b>): email of the initial user [<i>required</i>]</li><li><b>assigned_role</b> (<b>-a</b>): The role for the user you are creating. If not provided, the user will be assigned the role of <code>sys_admin</code> which contains all system and team permissions [<i>optional</i>]</li><li><b>database_username</b> (<b>-t</b>): Database username [<i>required</i>]</li><li><b>database_password</b> (<b>-e</b>): Database user password [<i>required</i>]</li><li><b>database_connection</b> (<b>-e</b>): Database connection string [<i>required</i>]</li><li><b>database_name</b> (<b>-e</b>): Database name [<i>required</i>]</li></ul></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variables-for-ogrre">Environment variables for OGRRE<a href="#environment-variables-for-ogrre" class="hash-link" aria-label="Direct link to Environment variables for OGRRE" title="Direct link to Environment variables for OGRRE">​</a></h2>
<div>The OGRRE backend requires 4 environment variables from your MongoDB setup. As explained in the <a href="getting_started">backend installation section</a>, the following variables must go inside your <code>.env</code> file.<ul><li><b>DB_USERNAME</b>: The username for the database user you created.</li><li><b>DB_PASSWORD</b>: The password for the database user you created.</li><li><b>DB_CONNECTION</b>: The cluster host name.</li><li><b>DB_NAME</b>: The name of the database inside your cluster that you would like to connect to.</li></ul>Your MongoDB database connection uri should look like this, substituting the bracketed variables with your credentials:<p><code>mongodb+srv://&lt;DB_USERNAME&gt;:&lt;DB_PASSWORD&gt;@&lt;DB_CONNECTION&gt;.mongodb.net</code></p></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/orphaned-wells-ui-doc/docs/install/gcp_setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create and connect Google project</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/orphaned-wells-ui-doc/docs/install/install_ogrre"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Install OGRRE on your computer</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-a-mongodb-database" class="table-of-contents__link toc-highlight">Create a MongoDB database</a></li><li><a href="#initialize-database-for-ogrre" class="table-of-contents__link toc-highlight">Initialize Database for OGRRE</a></li><li><a href="#environment-variables-for-ogrre" class="table-of-contents__link toc-highlight">Environment variables for OGRRE</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/orphaned-wells-ui-doc/docs/about">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/orphaned-wells-ui-doc/docs/usage">Usage</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/CATALOG-Historic-Records/orphaned-wells-ui/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Lawrence Berkeley National Laboratory</div></div></div></footer></div>
</body>
</html>