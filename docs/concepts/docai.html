<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/docai" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.1">
<title data-rh="true">Document Processing | OGRRE</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/img/ogrre-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/img/ogrre-social-card.jpg"><meta data-rh="true" property="og:url" content="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/concepts/docai"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Document Processing | OGRRE"><meta data-rh="true" name="description" content="Document processing workflow with DocAI"><meta data-rh="true" property="og:description" content="Document processing workflow with DocAI"><link data-rh="true" rel="icon" href="/orphaned-wells-ui-doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/concepts/docai"><link data-rh="true" rel="alternate" href="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/concepts/docai" hreflang="en"><link data-rh="true" rel="alternate" href="https://catalog-historic-records-wip.github.io/orphaned-wells-ui-doc/docs/concepts/docai" hreflang="x-default"><link rel="stylesheet" href="/orphaned-wells-ui-doc/assets/css/styles.594121fe.css">
<script src="/orphaned-wells-ui-doc/assets/js/runtime~main.64220e30.js" defer="defer"></script>
<script src="/orphaned-wells-ui-doc/assets/js/main.0671be5a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/orphaned-wells-ui-doc/"><div class="navbar__logo"><img src="/orphaned-wells-ui-doc/img/ogrre-logo.png" alt="OGRRE Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/orphaned-wells-ui-doc/img/ogrre-logo.png" alt="OGRRE Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OGRRE</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/orphaned-wells-ui-doc/docs/about">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CATALOG-Historic-Records/orphaned-wells-ui/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orphaned-wells-ui-doc/docs/about">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/orphaned-wells-ui-doc/docs/concepts">Concepts</a><button aria-label="Collapse sidebar category &#x27;Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/orphaned-wells-ui-doc/docs/concepts/docai">Document Processing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/orphaned-wells-ui-doc/docs/install">Installation</a><button aria-label="Expand sidebar category &#x27;Installation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/orphaned-wells-ui-doc/docs/tutorial">Tutorial</a><button aria-label="Expand sidebar category &#x27;Tutorial&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/orphaned-wells-ui-doc/docs/usage">Usage</a><button aria-label="Expand sidebar category &#x27;Usage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/orphaned-wells-ui-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/orphaned-wells-ui-doc/docs/concepts"><span itemprop="name">Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Document Processing</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Document processing with DocAI</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>The current deployment of OGRRE uses Google DocAI for digitizing documents.</p>
<p>This page describes the workflow used to process well records through DocAI.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology">​</a></h2>
<p>Following are terms used in this page:</p>
<table><thead><tr><th>Term</th><th>Synonyms</th><th>Definition</th></tr></thead><tbody><tr><td>model</td><td>AI model</td><td>Trained (DocAI) model that can transform inputs to outputs</td></tr><tr><td>collated documents</td><td>Raw PDFs</td><td>Multiple-page PDFs containing well records</td></tr><tr><td>splitter</td><td></td><td>AI model that can extract the PDF pages from collated documents</td></tr><tr><td>category</td><td></td><td>A label that identifies a type of document</td></tr><tr><td>training document</td><td></td><td>Document used to train an AI model</td></tr><tr><td>testing document</td><td></td><td>Document used to assess the accuracy of the AI model as part of the model training</td></tr><tr><td>classifier</td><td></td><td>AI model that groups documents into categories for processing</td></tr><tr><td>schema</td><td></td><td>Set of attributes that are expected for a document in a given category</td></tr><tr><td>field</td><td>attribute</td><td>One named value in a document</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to Workflow" title="Direct link to Workflow">​</a></h2>
<p>Below is a diagram showing an overview of the workflow:</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="split">Split<a href="#split" class="hash-link" aria-label="Direct link to Split" title="Direct link to Split">​</a></h3>
<p>Typical input documents are multiple page PDFs, only some of which contain the data of interest.
Different categories of report document have different boundaries, so they are labeled and identified.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="training">Training<a href="#training" class="hash-link" aria-label="Direct link to Training" title="Direct link to Training">​</a></h4>
<p>The training set is created with the following manual (human) steps, performed on the collated raw PDFs uaing the Google DocAI web interface:</p>
<ol>
<li>Identify the document boundaries</li>
<li>Assign a category, based on titles or content, to separate different collated document types</li>
</ol>
<p>Google DocAI needs at least 10 training documents and 2 testing documents for each category to automatically
apply the categories and boundaries to the rest of the collated documents.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="application">Application<a href="#application" class="hash-link" aria-label="Direct link to Application" title="Direct link to Application">​</a></h4>
<p>This &#x27;model&#x27; of document boundaries and categories can now be applied to the rest of the collated documents.
Then the processing workflow produces files like:
<code>{original file name}_{Splitter label}_{Label count}</code>.</p>
<ul>
<li>A useful original file name is the API number (e.g., if not inside the file itself)</li>
<li>The &quot;Label countitle: Usage Guide
sidebar_position: 2
t&quot; tracks the number of documents with the same “Splitter Label” for a given collated Document</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="classify">Classify<a href="#classify" class="hash-link" aria-label="Direct link to Classify" title="Direct link to Classify">​</a></h3>
<p>Once the documents have been split so that only the pages with the desired data are present,
they need to be grouped into categories based on document layout.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="training-1">Training<a href="#training-1" class="hash-link" aria-label="Direct link to Training" title="Direct link to Training">​</a></h4>
<p>Classifier category labels are based on the order of when each document type was identified,
using letters as follows: <code>{Splitter Label}_{A,B,C,..}</code>.
Each document receives one label.</p>
<p>The training set is created by labeling document types. As for the Split step, Google DocAI needs at least
10 training and 2 testing documents for each document type.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="application-1">Application<a href="#application-1" class="hash-link" aria-label="Direct link to Application" title="Direct link to Application">​</a></h4>
<p>The classifier model takes as input the splitter outputs from the previous step
and categorizes them into different schema label &quot;bins&quot;, which are mapped to different Google buckets for extraction.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extract">Extract<a href="#extract" class="hash-link" aria-label="Direct link to Extract" title="Direct link to Extract">​</a></h3>
<p>The final step in the workflow is to extract the data from each category of documents.
To do this, one must first train the processor, adding schema (field) labels for every field in the category of documents.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="training-2">Training<a href="#training-2" class="hash-link" aria-label="Direct link to Training" title="Direct link to Training">​</a></h4>
<p>Unlike the Split and Classify steps for a field to included in a model, Google DocAI needs the field to be included on at least 10 training and 10 testing documents to create a model.
One model is trained for each category identified in the previous Classify step.</p>
<p>Some important things to keep in mind for this process:</p>
<ul>
<li>Field labels matching the document text reduces incorrect auto-labeling.</li>
<li>Field labels may also be included into tables to facilitate grouping tabular data.</li>
<li>Unless otherwise required, the occurrence setting for fields inside of tables should be <code>once</code>.</li>
<li>Documents that have a field labels with the occurrence setting <code>required</code> will be excluded from training if that field cannot be detected.</li>
<li>Field labels that may occur more than once should have the occurrence setting <code>multiple</code>.</li>
<li>Keeping a record of the field labels, label type, occurrence, field groupings, and page order is best practice.<!-- -->
<ul>
<li>When training new models recording the fields that are disabled.</li>
</ul>
</li>
</ul>
<p>Below are details on the labeling process in Google DocAI:</p>
<ul>
<li>Upon opening a document, Google attempts to auto-label any unconfirmed field colored in purple.</li>
<li>Confirm field bounding boxes that are in the correct position.</li>
<li>Edit field bounding boxes that are in the wrong position.</li>
<li>Add field bounding boxes that are missed.</li>
<li>Bounding boxes must include detected “text”, Document with empty bounding boxes will be excluded from training.</li>
<li>Extracted text in the labeling process should not be edited.<!-- -->
<ul>
<li>The text reader is not part of the model training process.</li>
<li>Bounding boxes with edited text will be treated as incorrect detections during model testing in correctly reducing the accuracy of the model.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="application-2">Application<a href="#application-2" class="hash-link" aria-label="Direct link to Application" title="Direct link to Application">​</a></h4>
<p>The completed models are applied, in batch mode, with a script that is tied to the OGRRE tool. This process involves 2 steps:</p>
<ol>
<li>Before running the script, create a mapping between the trained model and the documents for which it is intended (which correspond to a Google bucket)</li>
<li>The script takes this mapping and runs the Google DocAI processor to generate digitized data for each, storing the results in the tool database.</li>
</ol>
<p>The combination of the document image (PDF) and digitized data are used by OGRRE to provide the interface for reviewing and correcting the digitized data.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/orphaned-wells-ui-doc/docs/concepts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Concepts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/orphaned-wells-ui-doc/docs/install"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#workflow" class="table-of-contents__link toc-highlight">Workflow</a><ul><li><a href="#split" class="table-of-contents__link toc-highlight">Split</a></li><li><a href="#classify" class="table-of-contents__link toc-highlight">Classify</a></li><li><a href="#extract" class="table-of-contents__link toc-highlight">Extract</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/orphaned-wells-ui-doc/docs/about">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/orphaned-wells-ui-doc/docs/usage">Usage</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/CATALOG-Historic-Records/orphaned-wells-ui/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Lawrence Berkeley National Laboratory</div></div></div></footer></div>
</body>
</html>